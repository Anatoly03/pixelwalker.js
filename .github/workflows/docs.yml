# https://gist.github.com/mikroskeem/fddaf7a4f80959d6e5f4711904885fae

name: "Publish documentation"

on:
    push:
        branches:
            - "main"

jobs:
    build:
        name: Build Package
        uses: Anatoly03/pixelwalker.js/.github/workflows/build.yml@main

    publish-documentation:
        runs-on: "ubuntu-latest"
        needs: build

        permissions:
            id-token: "write"
            pages: "write"

        environment:
            name: "github-pages"
            url: "${{ steps.deployment.outputs.page_url }}"

        steps:
            - name: "Building Documentation"
              run: npm run docs

            - id: "upload-documentation"
              name: "Uploading Pages artifact"
              uses: "actions/upload-pages-artifact@v2"
              with:
                  path: "docs/"

            - id: "deployment"
              name: "Deploy to GitHub Pages"
              uses: "actions/deploy-pages@v4"
